function [nspikes] = countspikes(raster, index, ecode1, offset1, ecode2, offset2)% This function will count the number of spikes that occured% between ecode1+offset1 and ecode2+offset2.global_indices;start = index(:,ecode1);start = start + offset1;stop = offset2;stop = index(:,ecode2);stop = stop + offset2;start = start * ones(1,size(raster,2));stop = stop * ones(1,size(raster,2));nspikes = sum((raster<stop & raster>start)')';end