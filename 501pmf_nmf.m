function [pa, pb, na, nb] = p501pmf_nmf(fname, plotopt)% [pa, pb, na, nb] = p501pmf_nmf(fname, plotopt)%	Takes a 501 spikes file (e.g., fname = '/data/kono/good/k007') and%	computes the psychometric and neurometric functions, returning alpha%	and beta vals for each (pa,pb for psycho; na,nb for neuro).%	If plotopt = 1, the routine plots the functions in the current axes.%	** neurometric part is not done yet **% testing. comment out.%$$$ cd /home/monkeybiz/mike/mat/mfiles%$$$ fname = '/data/kono/good/k007'%% The columns are: coh  choice  cor  spikestfn = tempnames = sprintf('tail +2 %s > %s', fname, tfn);[status, a] = unix(s);if status ~= 0  error('501pmf_nmf: unable to open file');endfid = fopen(tfn,'r');x = fscanf(fid,'%d');y = reshape(x,4,size(x,1)/4)';fclose(fid)% remove the temporary files = sprintf('rm %s', tfn);unix(s)% x = [y y(:,3)==y(:,2)];z = combinedups(y,1);x = z(:,[1 3 5])[pa,pb] = quickfit(x)%%% na, nb   not done yet