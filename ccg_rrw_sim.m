function [ret,x0,str,ts,xts]=ccg_rrw_sim(t,x,u,flag);%CCG_RRW_SIM	is the M-file description of the SIMULINK system named CCG_RRW_SIM.%	The block-diagram can be displayed by typing: CCG_RRW_SIM.%%	SYS=CCG_RRW_SIM(T,X,U,FLAG) returns depending on FLAG certain%	system values given time point, T, current state vector, X,%	and input vector, U.%	FLAG is used to indicate the type of output to be returned in SYS.%%	Setting FLAG=1 causes CCG_RRW_SIM to return state derivatives, FLAG=2%	discrete states, FLAG=3 system outputs and FLAG=4 next sample%	time. For more information and other options see SFUNC.%%	Calling CCG_RRW_SIM with a FLAG of zero:%	[SIZES]=CCG_RRW_SIM([],[],[],0),  returns a vector, SIZES, which%	contains the sizes of the state vector and other parameters.%		SIZES(1) number of states%		SIZES(2) number of discrete states%		SIZES(3) number of outputs%		SIZES(4) number of inputs%		SIZES(5) number of roots (currently unsupported)%		SIZES(6) direct feedthrough flag%		SIZES(7) number of sample times%%	For the definition of other parameters in SIZES, see SFUNC.%	See also, TRIM, LINMOD, LINSIM, EULER, RK23, RK45, ADAMS, GEAR.% Note: This M-file is only used for saving graphical information;%       after the model is loaded into memory an internal model%       representation is used.% the system will take on the name of this mfile:sys = mfilename;new_system(sys)simver(1.3)if (0 == (nargin + nargout))     set_param(sys,'Location',[100,100,901,782])     open_system(sys)end;set_param(sys,'algorithm',     'RK-45')set_param(sys,'Start time',    '0.0')set_param(sys,'Stop time',     'tdur')set_param(sys,'Min step size', '0.0001')set_param(sys,'Max step size', '.001')set_param(sys,'Relative error','1e-3')set_param(sys,'Return vars',   '')set_param(sys,'Accelerate','accelerate')%     Subsystem  'RRW Spike Model'.new_system([sys,'/','RRW Spike Model'])set_param([sys,'/','RRW Spike Model'],'Location',[143,41,773,441])add_block('built-in/Sum',[sys,'/','RRW Spike Model/Sum4'])set_param([sys,'/','RRW Spike Model/Sum4'],...		'inputs','-+',...		'position',[205,80,225,100])add_block('built-in/Clock',[sys,'/','RRW Spike Model/Clock'])set_param([sys,'/','RRW Spike Model/Clock'],...		'position',[330,335,350,355])add_block('built-in/Product',[sys,'/','RRW Spike Model/Product1'])set_param([sys,'/','RRW Spike Model/Product1'],...		'position',[420,300,455,320])add_block('built-in/Constant',[sys,'/','RRW Spike Model/Constant'])set_param([sys,'/','RRW Spike Model/Constant'],...		'orientation',2,...		'Value','0',...		'position',[235,205,255,225])add_block('built-in/Reset Integrator',[sys,'/',['RRW Spike Model/Reset',13,'Integrator']])set_param([sys,'/',['RRW Spike Model/Reset',13,'Integrator']],...		'position',[245,105,275,135])add_block('built-in/Relational Operator',[sys,'/',['RRW Spike Model/Relational',13,'Operator1']])set_param([sys,'/',['RRW Spike Model/Relational',13,'Operator1']],...		'orientation',2,...		'Operator','<',...		'position',[355,58,385,82])add_block('built-in/Constant',[sys,'/','RRW Spike Model/Constant1'])set_param([sys,'/','RRW Spike Model/Constant1'],...		'orientation',2,...		'Value','Nth/1000',...		'position',[425,54,455,76])add_block('built-in/Gain',[sys,'/','RRW Spike Model/Gain'])set_param([sys,'/','RRW Spike Model/Gain'],...		'orientation',1,...		'position',[502,100,528,130])add_block('built-in/Sum',[sys,'/','RRW Spike Model/Sum3'])set_param([sys,'/','RRW Spike Model/Sum3'],...		'position',[555,155,575,175])add_block('built-in/Product',[sys,'/','RRW Spike Model/Product'])set_param([sys,'/','RRW Spike Model/Product'],...		'orientation',3,...		'position',[117,195,148,215])add_block('built-in/Relational Operator',[sys,'/',['RRW Spike Model/Relational',13,'Operator']])set_param([sys,'/',['RRW Spike Model/Relational',13,'Operator']],...		'orientation',2,...		'position',[165,233,195,257])add_block('built-in/Sum',[sys,'/','RRW Spike Model/Sum2'])set_param([sys,'/','RRW Spike Model/Sum2'],...		'inputs','+-',...		'position',[160,160,180,180])add_block('built-in/Sum',[sys,'/','RRW Spike Model/Sum1'])set_param([sys,'/','RRW Spike Model/Sum1'],...		'inputs','+',...		'position',[80,200,100,220])add_block('built-in/Sum',[sys,'/','RRW Spike Model/Sum'])set_param([sys,'/','RRW Spike Model/Sum'],...		'inputs','+',...		'position',[80,130,100,150])add_block('built-in/Inport',[sys,'/','RRW Spike Model/in_1'])set_param([sys,'/','RRW Spike Model/in_1'],...		'position',[15,130,35,150])add_block('built-in/Outport',[sys,'/','RRW Spike Model/out_1'])set_param([sys,'/','RRW Spike Model/out_1'],...		'position',[615,155,635,175])add_block('built-in/Inport',[sys,'/','RRW Spike Model/in_2'])set_param([sys,'/','RRW Spike Model/in_2'],...		'Port','2',...		'position',[15,200,35,220])add_block('built-in/Outport',[sys,'/','RRW Spike Model/out_2'])set_param([sys,'/','RRW Spike Model/out_2'],...		'Port','2',...		'position',[615,300,635,320])add_block('built-in/Gain',[sys,'/','RRW Spike Model/Gain1'])set_param([sys,'/','RRW Spike Model/Gain1'],...		'Gain','fbgain',...		'position',[155,72,180,98])add_line([sys,'/','RRW Spike Model'],[185,170;190,170;200,95])add_line([sys,'/','RRW Spike Model'],[350,70;335,70;335,45;515,45;515,95])add_line([sys,'/','RRW Spike Model'],[335,55;130,55;130,120;240,120])add_line([sys,'/','RRW Spike Model'],[320,55;320,305;415,305])add_line([sys,'/','RRW Spike Model'],[355,345;380,345;380,315;415,315])add_line([sys,'/','RRW Spike Model'],[280,120;290,120;290,240;200,240])add_line([sys,'/','RRW Spike Model'],[290,165;400,165;390,75])add_line([sys,'/','RRW Spike Model'],[230,215;220,215;220,130;240,130])add_line([sys,'/','RRW Spike Model'],[230,90;240,110])add_line([sys,'/','RRW Spike Model'],[290,170;550,170])add_line([sys,'/','RRW Spike Model'],[515,135;515,160;550,160])add_line([sys,'/','RRW Spike Model'],[420,65;390,65])add_line([sys,'/','RRW Spike Model'],[135,190;135,175;155,175])add_line([sys,'/','RRW Spike Model'],[160,245;140,245;140,220])add_line([sys,'/','RRW Spike Model'],[105,210;110,230;125,220])add_line([sys,'/','RRW Spike Model'],[230,215;220,215;220,250;200,250])add_line([sys,'/','RRW Spike Model'],[105,140;125,140;125,165;155,165])add_line([sys,'/','RRW Spike Model'],[40,140;75,140])add_line([sys,'/','RRW Spike Model'],[580,165;610,165])add_line([sys,'/','RRW Spike Model'],[40,210;75,210])add_line([sys,'/','RRW Spike Model'],[460,310;610,310])add_line([sys,'/','RRW Spike Model'],[185,85;200,85])add_line([sys,'/','RRW Spike Model'],[290,120;290,70;140,70;150,85])set_param([sys,'/','RRW Spike Model'],...		'Mask Display','')%     Finished composite block 'RRW Spike Model'.set_param([sys,'/','RRW Spike Model'],...		'position',[195,82,225,133])add_block('built-in/From Workspace',[sys,'/',['Inhibition',13,'from workspace']])set_param([sys,'/',['Inhibition',13,'from workspace']],...		'matl_expr','[T,U1n]',...		'position',[50,142,90,168])add_block('built-in/From Workspace',[sys,'/',['Excitation',13,'from workspace']])set_param([sys,'/',['Excitation',13,'from workspace']],...		'matl_expr','[T,U1]',...		'position',[45,32,85,58])add_block('built-in/From Workspace',[sys,'/',['Excitation',13,'from workspace1']])set_param([sys,'/',['Excitation',13,'from workspace1']],...		'matl_expr','[T,U2]',...		'position',[60,222,100,248])add_block('built-in/From Workspace',[sys,'/',['Inhibition',13,'from workspace1']])set_param([sys,'/',['Inhibition',13,'from workspace1']],...		'matl_expr','[T,U2n]',...		'position',[65,332,105,358])add_block('built-in/Constant',[sys,'/','graph offset'])set_param([sys,'/','graph offset'],...		'Value','.015',...		'position',[370,17,400,33])add_block('built-in/Sum',[sys,'/','Sum'])set_param([sys,'/','Sum'],...		'position',[440,20,460,40])%     Subsystem  'RRW Spike Model1'.new_system([sys,'/','RRW Spike Model1'])set_param([sys,'/','RRW Spike Model1'],'Location',[345,405,1170,911])add_block('built-in/Sum',[sys,'/','RRW Spike Model1/Sum4'])set_param([sys,'/','RRW Spike Model1/Sum4'],...		'inputs','-+',...		'position',[205,80,225,100])add_block('built-in/Clock',[sys,'/','RRW Spike Model1/Clock'])set_param([sys,'/','RRW Spike Model1/Clock'],...		'position',[330,335,350,355])add_block('built-in/Product',[sys,'/','RRW Spike Model1/Product1'])set_param([sys,'/','RRW Spike Model1/Product1'],...		'position',[420,300,455,320])add_block('built-in/Constant',[sys,'/','RRW Spike Model1/Constant'])set_param([sys,'/','RRW Spike Model1/Constant'],...		'orientation',2,...		'Value','0',...		'position',[235,205,255,225])add_block('built-in/Reset Integrator',[sys,'/',['RRW Spike Model1/Reset',13,'Integrator']])set_param([sys,'/',['RRW Spike Model1/Reset',13,'Integrator']],...		'position',[245,105,275,135])add_block('built-in/Relational Operator',[sys,'/',['RRW Spike Model1/Relational',13,'Operator1']])set_param([sys,'/',['RRW Spike Model1/Relational',13,'Operator1']],...		'orientation',2,...		'Operator','<',...		'position',[355,58,385,82])add_block('built-in/Constant',[sys,'/','RRW Spike Model1/Constant1'])set_param([sys,'/','RRW Spike Model1/Constant1'],...		'orientation',2,...		'Value','Nth/1000',...		'position',[425,54,455,76])add_block('built-in/Gain',[sys,'/','RRW Spike Model1/Gain'])set_param([sys,'/','RRW Spike Model1/Gain'],...		'orientation',1,...		'position',[502,100,528,130])add_block('built-in/Sum',[sys,'/','RRW Spike Model1/Sum3'])set_param([sys,'/','RRW Spike Model1/Sum3'],...		'position',[555,155,575,175])add_block('built-in/Product',[sys,'/','RRW Spike Model1/Product'])set_param([sys,'/','RRW Spike Model1/Product'],...		'orientation',3,...		'position',[117,195,148,215])add_block('built-in/Relational Operator',[sys,'/',['RRW Spike Model1/Relational',13,'Operator']])set_param([sys,'/',['RRW Spike Model1/Relational',13,'Operator']],...		'orientation',2,...		'position',[165,233,195,257])add_block('built-in/Sum',[sys,'/','RRW Spike Model1/Sum2'])set_param([sys,'/','RRW Spike Model1/Sum2'],...		'inputs','+-',...		'position',[160,160,180,180])add_block('built-in/Sum',[sys,'/','RRW Spike Model1/Sum1'])set_param([sys,'/','RRW Spike Model1/Sum1'],...		'inputs','+',...		'position',[80,200,100,220])add_block('built-in/Sum',[sys,'/','RRW Spike Model1/Sum'])set_param([sys,'/','RRW Spike Model1/Sum'],...		'inputs','+',...		'position',[80,130,100,150])add_block('built-in/Inport',[sys,'/','RRW Spike Model1/in_1'])set_param([sys,'/','RRW Spike Model1/in_1'],...		'position',[15,130,35,150])add_block('built-in/Outport',[sys,'/','RRW Spike Model1/out_1'])set_param([sys,'/','RRW Spike Model1/out_1'],...		'position',[615,155,635,175])add_block('built-in/Inport',[sys,'/','RRW Spike Model1/in_2'])set_param([sys,'/','RRW Spike Model1/in_2'],...		'Port','2',...		'position',[15,200,35,220])add_block('built-in/Outport',[sys,'/','RRW Spike Model1/out_2'])set_param([sys,'/','RRW Spike Model1/out_2'],...		'Port','2',...		'position',[615,300,635,320])add_block('built-in/Gain',[sys,'/','RRW Spike Model1/Gain1'])set_param([sys,'/','RRW Spike Model1/Gain1'],...		'Gain','fbgain',...		'position',[155,72,180,98])add_line([sys,'/','RRW Spike Model1'],[185,170;190,170;200,95])add_line([sys,'/','RRW Spike Model1'],[350,70;335,70;335,45;515,45;515,95])add_line([sys,'/','RRW Spike Model1'],[335,55;130,55;130,120;240,120])add_line([sys,'/','RRW Spike Model1'],[320,55;320,305;415,305])add_line([sys,'/','RRW Spike Model1'],[355,345;380,345;380,315;415,315])add_line([sys,'/','RRW Spike Model1'],[280,120;290,120;290,240;200,240])add_line([sys,'/','RRW Spike Model1'],[290,165;400,165;390,75])add_line([sys,'/','RRW Spike Model1'],[230,215;220,215;220,130;240,130])add_line([sys,'/','RRW Spike Model1'],[230,90;240,110])add_line([sys,'/','RRW Spike Model1'],[290,170;550,170])add_line([sys,'/','RRW Spike Model1'],[515,135;515,160;550,160])add_line([sys,'/','RRW Spike Model1'],[420,65;390,65])add_line([sys,'/','RRW Spike Model1'],[135,190;135,175;155,175])add_line([sys,'/','RRW Spike Model1'],[160,245;140,245;140,220])add_line([sys,'/','RRW Spike Model1'],[105,210;110,230;125,220])add_line([sys,'/','RRW Spike Model1'],[230,215;220,215;220,250;200,250])add_line([sys,'/','RRW Spike Model1'],[105,140;125,140;125,165;155,165])add_line([sys,'/','RRW Spike Model1'],[40,140;75,140])add_line([sys,'/','RRW Spike Model1'],[580,165;610,165])add_line([sys,'/','RRW Spike Model1'],[40,210;75,210])add_line([sys,'/','RRW Spike Model1'],[460,310;610,310])add_line([sys,'/','RRW Spike Model1'],[185,85;200,85])add_line([sys,'/','RRW Spike Model1'],[290,120;290,70;140,70;150,85])set_param([sys,'/','RRW Spike Model1'],...		'Mask Display','')%     Finished composite block 'RRW Spike Model1'.set_param([sys,'/','RRW Spike Model1'],...		'position',[210,267,240,318])add_block('built-in/Gain',[sys,'/','Gain'])set_param([sys,'/','Gain'],...		'Gain','InhibGain',...		'position',[115,142,140,168])add_block('built-in/Gain',[sys,'/','Gain1'])set_param([sys,'/','Gain1'],...		'Gain','InhibGain',...		'position',[135,332,160,358])add_block('built-in/To Workspace',[sys,'/','To Workspace1'])set_param([sys,'/','To Workspace1'],...		'mat-name','U2out',...		'buffer','tdur*1000',...		'position',[675,297,725,313])add_block('built-in/To Workspace',[sys,'/',['Unit 2 Voltage out',13,'to workspace1']])set_param([sys,'/',['Unit 2 Voltage out',13,'to workspace1']],...		'mat-name','V1',...		'buffer','tdur*1000',...		'position',[655,52,705,68])%     Subsystem  'Graph'.new_system([sys,'/','Graph'])set_param([sys,'/','Graph'],'Location',[0,59,274,252])add_block('built-in/Inport',[sys,'/','Graph/x'])set_param([sys,'/','Graph/x'],...		'position',[65,55,85,75])add_block('built-in/S-Function',[sys,'/',['Graph/S-function',13,'M-file which plots',13,'lines',13,'']])set_param([sys,'/',['Graph/S-function',13,'M-file which plots',13,'lines',13,'']],...		'function name','sfuny',...		'parameters','ax, color,dt',...		'position',[130,55,180,75])add_line([sys,'/','Graph'],[90,65;125,65])set_param([sys,'/','Graph'],...		'Mask Display','plot(0,0,100,100,[90,10,10,10,90,90,10],[65,65,90,40,40,90,90],[90,78,69,54,40,31,25,10],[77,60,48,46,56,75,81,84])',...		'Mask Type','Graph scope.')set_param([sys,'/','Graph'],...		'Mask Dialogue','Graph scope using MATLAB graph window.\nEnter plotting ranges and line type.|Time range:|y-min:|y-max:|Line type (rgbw-:*). Seperate each plot by ''/'':')set_param([sys,'/','Graph'],...		'Mask Translate','color = @4; ax = [0, @1, @2, @3]; dt = -1;')set_param([sys,'/','Graph'],...		'Mask Help','This block plots to the MATLAB graph window and can be used as an improved version of the Scope block. Look at the m-file sfuny.m to see how it works. This block can take scalar or vector input signal.')set_param([sys,'/','Graph'],...		'Mask Entries','.1\/0\/.05\/''y-/g--/c-./w:/m*/ro/b+''\/')%     Finished composite block 'Graph'.set_param([sys,'/','Graph'],...		'position',[575,206,605,244])add_block('built-in/Mux',[sys,'/','Mux'])set_param([sys,'/','Mux'],...		'inputs','2',...		'position',[520,206,550,239])add_block('built-in/To Workspace',[sys,'/',['Unit 1 Voltage out',13,'to workspace']])set_param([sys,'/',['Unit 1 Voltage out',13,'to workspace']],...		'mat-name','V2',...		'buffer','tdur*1000',...		'position',[675,252,725,268])add_block('built-in/To Workspace',[sys,'/','To Workspace'])set_param([sys,'/','To Workspace'],...		'mat-name','U1out',...		'buffer','tdur*1000',...		'position',[650,112,700,128])add_line(sys,[90,45;135,45;135,95;190,95])add_line(sys,[230,120;645,120])add_line(sys,[105,235;152,235;152,280;205,280])add_line(sys,[245,305;670,305])add_line(sys,[245,280;345,280;345,230;515,230])add_line(sys,[555,225;570,225])add_line(sys,[465,30;485,30;485,215;515,215])add_line(sys,[405,25;435,25])add_line(sys,[230,95;425,95;435,35])add_line(sys,[95,155;110,155])add_line(sys,[145,155;160,155;160,120;190,120])add_line(sys,[165,345;180,345;180,305;205,305])add_line(sys,[110,345;130,345])add_line(sys,[425,85;425,60;650,60])add_line(sys,[345,260;670,260])drawnow% Return any arguments.if (nargin | nargout)	% Must use feval here to access system in memory	if (nargin > 3)		if (flag == 0)			eval(['[ret,x0,str,ts,xts]=',sys,'(t,x,u,flag);'])		else			eval(['ret =', sys,'(t,x,u,flag);'])		end	else		[ret,x0,str,ts,xts] = feval(sys);	endelse	drawnow % Flash up the model and execute load callbackend