function evmtx = readfiles(pcoh,monkey,matfname)% evmtx = readfiles(pcoh,monkey,matfname) reads in data from unit files and%    generates expected values for response and variance as a function of% 	coherence.  The function uses spline interpolation and linear% 	regression for values of coh that % are not present in the data% 	file.  The monkey is specified by 'ekwj' or % 'ek' or 'j'.  pcoh is% 	the vector of dot coherence vals expressed on % -999..999 range The% 	expected response in the interpolated value given the % response of% 	the unit and its list of dot coherences tested.  I have deleted the% 	variance calculations.% 	If a 3rd argument is supplied, the routine will save a mat-file with% 	the results.  The file will contain pcoh,monkey, and evmtx.%    % updated 1/1/95.  M N Shadlen    see getunit.ms = [      '/data/eve/good/e001'      '/data/eve/good/e006'      '/data/eve/good/e007'      '/data/eve/good/e010'      '/data/eve/good/e011'      '/data/eve/good/e019'      '/data/eve/good/e021'      '/data/eve/good/e023'      '/data/eve/good/e024'      '/data/eve/good/e025'      '/data/eve/good/e028'      '/data/eve/good/e029'      '/data/eve/good/e030'      '/data/eve/good/e031'      '/data/eve/good/e034'      '/data/eve/good/e035'      '/data/eve/good/e038'      '/data/eve/good/e039'      '/data/eve/good/e040'      '/data/eve/good/e043'      '/data/eve/good/e044'      '/data/eve/good/e045'      '/data/eve/good/e046'      '/data/eve/good/e047'      '/data/eve/good/e048'      '/data/eve/good/e049'      '/data/eve/good/e053'      '/data/eve/good/e056'      '/data/eve/good/e057'      '/data/eve/good/e058'      '/data/eve/good/e059'      '/data/eve/good/e060'      '/data/eve/good/e061'      '/data/eve/good/e063'      '/data/eve/good/e064'      '/data/eve/good/e065'      '/data/eve/good/e066'      '/data/eve/good/e067'      '/data/eve/good/e068'      '/data/eve/good/e076'      '/data/eve/good/e077'      '/data/eve/good/e078'      '/data/eve/good/e082'      '/data/eve/good/e083'      '/data/eve/good/e084'      '/data/eve/good/e085'      '/data/eve/good/e086'      '/data/eve/good/e088'      '/data/eve/good/e089'      '/data/eve/good/e090'      '/data/eve/good/e093'      '/data/eve/good/e094'      '/data/eve/good/e096'      '/data/eve/good/e098'      '/data/eve/good/e099'      '/data/eve/good/e105'      '/data/eve/good/e106'      '/data/eve/good/e109'      '/data/eve/good/e110'      '/data/eve/good/e112'      '/data/eve/good/e115'      '/data/eve/good/e116'      '/data/eve/good/e117'      '/data/eve/good/e118'      '/data/eve/good/e121'      '/data/eve/good/e124'      '/data/eve/good/e126'      '/data/eve/good/e130'      '/data/eve/good/e132'      '/data/eve/good/e134'      '/data/eve/good/e137'      '/data/eve/good/e138'      '/data/eve/good/e140'      '/data/eve/good/e142'      '/data/eve/good/e144'      '/data/eve/good/e145'      '/data/eve/good/e146'      '/data/eve/good/e147'      '/data/eve/good/e148'      '/data/eve/good/e149'      '/data/eve/good/e153'      '/data/eve/good/e155'      '/data/eve/good/e158'      '/data/eve/good/e162'      '/data/eve/good/e164'      '/data/eve/good/e165'      '/data/eve/good/e170'      '/data/eve/good/e172'      '/data/eve/good/e174'      '/data/eve/good/e176'      '/data/eve/good/e177'      '/data/eve/good/e179'      '/data/eve/good/e180'      '/data/eve/good/e181'      '/data/eve/good/e184'      '/data/eve/good/e186'      '/data/eve/good/e189'      ];w = ['/data/wacko/good/w001''/data/wacko/good/w004''/data/wacko/good/w005''/data/wacko/good/w010''/data/wacko/good/w014''/data/wacko/good/w015''/data/wacko/good/w016''/data/wacko/good/w017''/data/wacko/good/w022''/data/wacko/good/w024''/data/wacko/good/w025''/data/wacko/good/w026''/data/wacko/good/w029''/data/wacko/good/w030''/data/wacko/good/w031''/data/wacko/good/w037''/data/wacko/good/w038''/data/wacko/good/w039''/data/wacko/good/w040''/data/wacko/good/w044''/data/wacko/good/w045''/data/wacko/good/w046''/data/wacko/good/w050''/data/wacko/good/w052''/data/wacko/good/w057''/data/wacko/good/w059''/data/wacko/good/w064''/data/wacko/good/w065''/data/wacko/good/w067''/data/wacko/good/w069''/data/wacko/good/w071''/data/wacko/good/w072''/data/wacko/good/w073''/data/wacko/good/w078''/data/wacko/good/w079''/data/wacko/good/w081''/data/wacko/good/w082''/data/wacko/good/w084''/data/wacko/good/w087''/data/wacko/good/w088''/data/wacko/good/w089''/data/wacko/good/w091''/data/wacko/good/w092''/data/wacko/good/w100''/data/wacko/good/w101''/data/wacko/good/w102''/data/wacko/good/w108''/data/wacko/good/w119''/data/wacko/good/w120''/data/wacko/good/w123''/data/wacko/good/w124''/data/wacko/good/w128''/data/wacko/good/w129''/data/wacko/good/w132''/data/wacko/good/w137''/data/wacko/good/w142''/data/wacko/good/w143''/data/wacko/good/w144''/data/wacko/good/w150''/data/wacko/good/w151''/data/wacko/good/w152''/data/wacko/good/w154''/data/wacko/good/w160''/data/wacko/good/w169''/data/wacko/good/w170''/data/wacko/good/w172''/data/wacko/good/w173''/data/wacko/good/w175''/data/wacko/good/w177''/data/wacko/good/w178''/data/wacko/good/w180''/data/wacko/good/w181''/data/wacko/good/w183''/data/wacko/good/w184''/data/wacko/good/w185''/data/wacko/good/w188''/data/wacko/good/w189''/data/wacko/good/w190''/data/wacko/good/w195''/data/wacko/good/w197''/data/wacko/good/w199''/data/wacko/good/w200''/data/wacko/good/w202''/data/wacko/good/w209''/data/wacko/good/w210''/data/wacko/good/w213''/data/wacko/good/w216''/data/wacko/good/w217'];k = ['/data/kono/good/k007''/data/kono/good/k008''/data/kono/good/k010''/data/kono/good/k012''/data/kono/good/k013''/data/kono/good/k014''/data/kono/good/k017''/data/kono/good/k019''/data/kono/good/k020''/data/kono/good/k059''/data/kono/good/k061''/data/kono/good/k062''/data/kono/good/k063''/data/kono/good/k065''/data/kono/good/k066''/data/kono/good/k067''/data/kono/good/k069''/data/kono/good/k071''/data/kono/good/k078''/data/kono/good/k079''/data/kono/good/k080''/data/kono/good/k081''/data/kono/good/k082''/data/kono/good/k084''/data/kono/good/k085''/data/kono/good/k086''/data/kono/good/k088''/data/kono/good/k089''/data/kono/good/k090''/data/kono/good/k092''/data/kono/good/k093''/data/kono/good/k094''/data/kono/good/k096''/data/kono/good/k097''/data/kono/good/k099''/data/kono/good/k101''/data/kono/good/k102''/data/kono/good/k103'];j = ['/data/jack/good/j001''/data/jack/good/j003''/data/jack/good/j008''/data/jack/good/j011''/data/jack/good/j015''/data/jack/good/j016''/data/jack/good/j018''/data/jack/good/j022''/data/jack/good/j024''/data/jack/good/j025''/data/jack/good/j027''/data/jack/good/j028''/data/jack/good/j032''/data/jack/good/j033''/data/jack/good/j036''/data/jack/good/j037''/data/jack/good/j039''/data/jack/good/j047''/data/jack/good/j049''/data/jack/good/j050''/data/jack/good/j053''/data/jack/good/j054''/data/jack/good/j056''/data/jack/good/j062''/data/jack/good/j065''/data/jack/good/j069''/data/jack/good/j073''/data/jack/good/j085''/data/jack/good/j092''/data/jack/good/j098''/data/jack/good/j102''/data/jack/good/j106''/data/jack/good/j109''/data/jack/good/j117''/data/jack/good/j118''/data/jack/good/j120''/data/jack/good/j123''/data/jack/good/j125''/data/jack/good/j128''/data/jack/good/j129''/data/jack/good/j133''/data/jack/good/j134''/data/jack/good/j136''/data/jack/good/j137''/data/jack/good/j147''/data/jack/good/j158''/data/jack/good/j159''/data/jack/good/j160''/data/jack/good/j161''/data/jack/good/j162''/data/jack/good/j164''/data/jack/good/j166''/data/jack/good/j171''/data/jack/good/j174''/data/jack/good/j178''/data/jack/good/j181''/data/jack/good/j183''/data/jack/good/j186''/data/jack/good/j188''/data/jack/good/j189''/data/jack/good/j193''/data/jack/good/j195''/data/jack/good/j200''/data/jack/good/j201''/data/jack/good/j204''/data/jack/good/j211''/data/jack/good/j219''/data/jack/good/j221''/data/jack/good/j233''/data/jack/good/j237''/data/jack/good/j245''/data/jack/good/j246''/data/jack/good/j247''/data/jack/good/j248''/data/jack/good/j251''/data/jack/good/j257''/data/jack/good/j258'];if nargin < 1  pcoh = [-256 -128 -64 -32 -16 -8 -4 0 4 8 16 32 64 128 256]  monkey = 'ekwj'endi = 1;if ~isempty([findstr('k',monkey) findstr('K',monkey)])  for ii = 1:length(k)    fprintf('%s\n', k(ii,:));    evmtx(i,:) = getunit(k(ii,:), pcoh);    i = i + 1;  endendif ~isempty([findstr('e',monkey) findstr('E',monkey)])  for ii = 1:length(s)    fprintf('%s\n', s(ii,:));    evmtx(i,:) = getunit(s(ii,:), pcoh);    i = i + 1;  endendif ~isempty([findstr('w',monkey) findstr('W',monkey)])  for ii = 1:length(w)    fprintf('%s\n', w(ii,:));    evmtx(i,:) = getunit(w(ii,:), pcoh);    i = i + 1;  endendif ~isempty([findstr('j',monkey) findstr('J',monkey)])  for ii = 1:length(j)    fprintf('%s\n', j(ii,:));    evmtx(i,:) = getunit(j(ii,:), pcoh);    i = i + 1;  endendif nargin == 3  s = sprintf('save %s evmtx pcoh monkey', matfname)  eval(s);end